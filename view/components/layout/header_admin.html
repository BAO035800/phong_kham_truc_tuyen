<!-- HEADER (ADMIN) -->
<header class="w-full sticky top-0 z-50 bg-white/90 backdrop-blur border-b border-border shadow-sm">
    <!-- Topbar -->
    <div class="w-full bg-primary text-white text-sm">
        <div class="container mx-auto px-4 flex items-center justify-between py-1.5">
          <div class="flex items-center gap-2 font-medium">
            <i class="fa-solid fa-user-doctor text-xs"></i>
            <span id="adminGreeting"></span>
          </div>
    
          <button id="logoutBtnDoctor"
            class="flex items-center justify-center w-9 h-9 rounded-full hover:bg-white/20 transition"
            title="Đăng xuất">
            <i class="fa-solid fa-right-from-bracket text-sm"></i>
          </button>
        </div>
      </div>
    <!-- Main Navigation -->
    <div class="container mx-auto px-4">
      <div class="flex items-center justify-between py-3">
        <!-- Brand -->
        <a href="#/admin" class="flex items-center gap-3 group">
          <div class="h-10 w-10 rounded-xl bg-primary50 text-primary grid place-content-center shadow-soft">
            <i class="fa-solid fa-sitemap"></i>
          </div>
          <div class="leading-tight">
            <div class="font-extrabold text-lg text-textmain group-hover:text-primary transition">
              Bảng Điều Khiển Admin
            </div>
            <div class="text-textmuted text-xs tracking-wide">Phòng Khám</div>
          </div>
        </a>
  
        <!-- Mobile toggle -->
        <button type="button"
          class="lg:hidden inline-flex h-10 w-10 items-center justify-center rounded-md border border-border hover:bg-bgpage"
          data-toggle="mobile-nav" aria-controls="navMain" aria-expanded="false" aria-label="Mở menu">
          <i class="fa-solid fa-bars text-slate-700"></i>
        </button>
  
        <!-- Navigation -->
        <nav id="navMain" class="hidden lg:block">
          <ul class="flex flex-col lg:flex-row lg:items-center gap-2 lg:gap-1">
            <li>
              <a href="#/admin"
                 class="nav-link block px-3 py-2 text-slate-700 hover:text-primary transition relative">
                Tổng quan
              </a>
            </li>
            <li>
              <a href="#/admin/doctors"
                 class="nav-link block px-3 py-2 text-slate-700 hover:text-primary transition relative">
                Bác sĩ
              </a>
            </li>
            <li>
              <a href="#/admin/services"
                 class="nav-link block px-3 py-2 text-slate-700 hover:text-primary transition relative">
                Dịch vụ
              </a>
            </li>
            <li>
              <a href="#/admin/patients"
                 class="nav-link block px-3 py-2 text-slate-700 hover:text-primary transition relative">
                Bệnh nhân
              </a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </header>
  
  <!-- Underline hover/active effect -->
  <style>
    .nav-link::after{
      content:"";
      position:absolute;
      left:16px; right:16px; bottom:6px;
      height:2px; width:0%;
      background-color:currentColor;
      transition:width .22s ease;
    }
    .nav-link:hover::after,
    .nav-link.active::after{ width:calc(100% - 32px); }
  </style>
  
  <script>
    // Greeting admin
    (function () {
      const user = JSON.parse(localStorage.getItem("user") || "null");
      const greet = document.getElementById("adminGreeting");
      if (user && greet) greet.textContent = `Xin chào, ${user.name}`;
    })();
  
    // Active link theo hash (đồng bộ với header_doctor)
    document.addEventListener("DOMContentLoaded", () => {
      const links = Array.from(document.querySelectorAll(".nav-link"));
      function setActive(){
        const h = window.location.hash || "#/admin";
        links.forEach(a => {
          const active = a.getAttribute("href") === h;
          a.classList.toggle("text-primary", active);
          a.classList.toggle("font-semibold", active);
          a.classList.toggle("active", active);
          if (active) a.setAttribute("aria-current", "page");
          else a.removeAttribute("aria-current");
        });
      }
      setActive();
      window.addEventListener("hashchange", setActive);
  
      // Logout (giữ nguyên id để app.js xử lý)
      const logoutBtn = document.getElementById("logoutBtnAdmin");
      if (logoutBtn) {
        logoutBtn.addEventListener("click", async () => {
          localStorage.removeItem("user");
          // nạp header_guest & điều hướng về login (giống doctor)
          const header = document.getElementById("header");
          const res = await fetch("./components/layout/header_guest.html?v=" + Date.now());
          header.innerHTML = await res.text();
          window.location.hash = "#/login";
          if (typeof renderPage === "function") renderPage();
        });
      }
    });
  </script>
  