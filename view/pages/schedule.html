<!-- ===============================
üìÖ L·ªäCH H·∫∏N B·ªÜNH NH√ÇN (SCHEDULE)
CRUD: th√™m - s·ª≠a - xo√° - l∆∞u LocalStorage
=============================== -->
<section id="schedule" class="py-16 bg-surface text-textmain">
  <div class="container mx-auto px-4">
    <header class="text-center mb-10" data-aos="fade-up">
      <h2 class="text-3xl font-bold text-primary">L·ªãch h·∫πn b·ªánh nh√¢n</h2>
      <p class="text-textmain/70 max-w-2xl mx-auto mt-2">
        Qu·∫£n l√Ω v√† theo d√µi l·ªãch kh√°m theo tu·∫ßn ho·∫∑c d·∫°ng danh s√°ch. C√≥ t√¨m ki·∫øm, l·ªçc tr·∫°ng th√°i, v√† ƒëi·ªÅu h∆∞·ªõng tu·∫ßn.
      </p>
    </header>

    <!-- Thanh c√¥ng c·ª• -->
    <div class="bg-white rounded-2xl shadow-card border border-border p-4 md:p-5 mb-6" data-aos="fade-up" data-aos-delay="100">
      <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
        <div class="flex items-center gap-2">
          <button data-view="week" class="view-btn rounded-xl px-4 py-2 text-sm bg-primary text-white shadow-md">
            <i class="fa-solid fa-calendar-week mr-2"></i>Tu·∫ßn
          </button>
          <button data-view="list" class="view-btn rounded-xl px-4 py-2 text-sm border border-border hover:bg-bgpage">
            <i class="fa-solid fa-list mr-2"></i>Danh s√°ch
          </button>
        </div>

        <div class="flex flex-col gap-2 sm:flex-row sm:items-center">
          <div class="relative">
            <input id="sch-search" type="text" placeholder="T√¨m b·ªánh nh√¢n, b√°c sƒ©‚Ä¶"
              class="w-72 rounded-2xl border border-border bg-white py-2 pl-10 pr-3 text-sm shadow-sm placeholder:text-textmain/50 focus:outline-none focus:border-primary">
            <span class="pointer-events-none absolute left-3 top-2.5 text-textmain/50"><i class="fa-solid fa-magnifying-glass"></i></span>
          </div>
          <!-- L·ªçc tr·∫°ng th√°i -->
          <select id="sch-status" class="rounded-2xl border border-border bg-white px-3 py-2 text-sm shadow-sm focus:outline-none focus:border-primary">
            <option value="all">T·∫•t c·∫£ tr·∫°ng th√°i</option>
            <option value="waiting">ƒêang ƒë·ª£i</option>
            <option value="booked">ƒê√£ ƒë·∫∑t</option>
            <option value="done">ƒê√£ kh√°m xong</option>
            <option value="cancelled">ƒê√£ h·ªßy</option>
          </select>
          <a href="#/booking" class="btn-add rounded-2xl bg-primary px-4 py-2 text-sm font-semibold text-white shadow-md hover:bg-primary/90">
            <i class="fa-solid fa-plus mr-2"></i>Cu·ªôc h·∫πn m·ªõi
          </a>
        </div>
      </div>

      <div id="week-nav" class="mt-4 flex items-center justify-between gap-2">
        <div class="flex items-center gap-2">
          <button id="prev-week" class="rounded-xl border border-border bg-bgpage px-3 py-2 text-sm hover:bg-white">‚Üê Tu·∫ßn tr∆∞·ªõc</button>
          <button id="today-week" class="rounded-xl border border-border bg-bgpage px-3 py-2 text-sm hover:bg-white">H√¥m nay</button>
          <button id="next-week" class="rounded-xl border border-border bg-bgpage px-3 py-2 text-sm hover:bg-white">Tu·∫ßn sau ‚Üí</button>
        </div>
        <div class="text-sm text-textmain/70">Tu·∫ßn b·∫Øt ƒë·∫ßu: <span id="week-start" class="font-semibold text-textmain"></span></div>
      </div>
    </div>

    <!-- WEEK VIEW -->
    <div id="week-view" class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4" data-aos="fade-up" data-aos-delay="150"></div>

    <!-- LIST VIEW -->
    <div id="list-view" class="hidden overflow-hidden rounded-2xl border border-border bg-white shadow-card" data-aos="fade-up" data-aos-delay="150">
      <table class="min-w-full divide-y divide-border">
        <thead class="bg-bgpage/60">
          <tr class="text-left text-xs font-semibold uppercase tracking-wider text-textmain/70">
            <th class="px-4 py-3">B·ªánh nh√¢n</th>
            <th class="px-4 py-3">Th·ªùi gian</th>
            <th class="px-4 py-3">B√°c sƒ©</th>
            <th class="px-4 py-3">Tr·∫°ng th√°i</th>
            <th class="px-4 py-3">Ghi ch√∫</th>
            <th class="px-4 py-3 text-right">H√†nh ƒë·ªông</th>
          </tr>
        </thead>
        <tbody id="list-body" class="divide-y divide-border/60 text-sm"></tbody>
      </table>
    </div>
  </div>
</section>

<!-- MODAL CRUD -->
<div id="appt-modal" class="fixed inset-0 bg-black/50 hidden items-center justify-center z-50">
  <div class="bg-white rounded-2xl shadow-xl w-full max-w-md p-6">
    <h3 id="modal-title" class="text-xl font-semibold mb-4">Th√™m l·ªãch h·∫πn</h3>
    <form id="appt-form" class="space-y-3">
      <input type="hidden" id="appt-id">
      <div>
        <label class="block text-sm mb-1">T√™n b·ªánh nh√¢n</label>
        <input id="appt-name" type="text" class="w-full border rounded-xl p-2 focus:border-primary outline-none" required>
      </div>
      <div class="grid grid-cols-2 gap-2">
        <div>
          <label class="block text-sm mb-1">Ng√†y</label>
          <input id="appt-date" type="date" class="w-full border rounded-xl p-2 focus:border-primary outline-none" required>
        </div>
        <div>
          <label class="block text-sm mb-1">B√°c sƒ©</label>
          <input id="appt-provider" type="text" class="w-full border rounded-xl p-2 focus:border-primary outline-none" required>
        </div>
      </div>
      <div class="grid grid-cols-2 gap-2">
        <div>
          <label class="block text-sm mb-1">B·∫Øt ƒë·∫ßu</label>
          <input id="appt-start" type="time" class="w-full border rounded-xl p-2 focus:border-primary outline-none" required>
        </div>
        <div>
          <label class="block text-sm mb-1">K·∫øt th√∫c</label>
          <input id="appt-end" type="time" class="w-full border rounded-xl p-2 focus:border-primary outline-none" required>
        </div>
      </div>
      <div>
        <label class="block text-sm mb-1">Tr·∫°ng th√°i</label>
        <select id="appt-status" class="w-full border rounded-xl p-2 focus:border-primary outline-none">
          <option value="waiting">ƒêang ƒë·ª£i</option>
          <option value="booked">ƒê√£ ƒë·∫∑t</option>
          <option value="done">ƒê√£ kh√°m xong</option>
          <option value="cancelled">ƒê√£ h·ªßy</option>
        </select>
      </div>
      <div>
        <label class="block text-sm mb-1">Ghi ch√∫</label>
        <textarea id="appt-notes" rows="2" class="w-full border rounded-xl p-2 focus:border-primary outline-none"></textarea>
      </div>
      <div class="flex justify-end gap-2 pt-2">
        <button type="button" id="btn-cancel" class="rounded-xl border border-border px-4 py-2 text-sm hover:bg-bgpage">Hu·ª∑</button>
        <button type="submit" class="rounded-xl bg-primary text-white px-4 py-2 text-sm hover:bg-primary/90">L∆∞u</button>
      </div>
    </form>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => setupSchedulePage());
</script>
